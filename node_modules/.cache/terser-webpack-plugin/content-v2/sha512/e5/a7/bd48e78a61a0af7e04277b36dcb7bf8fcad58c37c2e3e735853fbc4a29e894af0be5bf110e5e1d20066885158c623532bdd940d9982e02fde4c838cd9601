{"code":"(this[\"webpackJsonpflip-book-react-master\"]=this[\"webpackJsonpflip-book-react-master\"]||[]).push([[0],{30:function(t,e,n){},67:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){\"use strict\";n.r(e);var a=n(1),r=n(19),c=n.n(r),i=(n(30),n(15)),o=n.n(i),u=n(0),s=n(20),l=n(4),g=n(3),b=n.n(g),f=function(t){return Math.pow(t,2)},h=function(t){return t<.5?f(2*t)/2:.5+function(t){return 1-f(1-t)}(2*(t-.5))/2},j=function(t,e){return e[t]||null},p=(b()(j),b()((function(t,e,n,a,r,c){if(1===t)return e-n;var i=j(a,c)?e-n:e/2;return i>r?i:r})),b()((function(t,e,n,a,r,c){if(1===t)return n;var i=j(a,c)?n:e/2;return i<r?i:r})),b()((function(t,e){return Math.round(t*e)})),b()((function(t,e){return Math.round(t*e)})),b()((function(t,e,n){return console.log(\"xMargin\",t,e,n),(t-e*n)/2})),b()((function(t,e){return(t-e)/2})),b()((function(t){return Math.round(t)})),n(5)),d=n(12),O=n(25),m=n(23),v=[null,{url:\"images/1.jpg\",id:\"8182045543\"},{url:\"images/2.jpg\",id:\"4591469984\"},{url:\"images/3.jpg\",id:\"3816263638\"},{url:\"images/4.jpg\",id:\"7912047691\"},{url:\"images/5.jpg\",id:\"4944943318\"},{url:\"images/6.jpg\",id:\"3800999370\"}],x=new(function(t){Object(O.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={pageWidth:640,pageHeight:906,pages:v,leftPage:0,rightPage:1},t}return n}(p.a)),w=x;window.thaycacac=x;var k=n(24),y=n(22),M=n(6),I=function(){function t(e){Object(d.a)(this,t),e?Array.isArray(e)?this.m=e:this.m=Object(k.a)(e.m):this.m=Object(M.a)()}return Object(y.a)(t,[{key:\"multiply\",value:function(t){return Array.isArray(t)||(t=t.m),this.m=Object(M.b)(this.m,t)}},{key:\"computeX\",value:function(){return this.m[12]}},{key:\"translate\",value:function(t,e){return this.multiply(Object(M.d)(t,e))}},{key:\"translateZ\",value:function(t){return this.multiply(Object(M.e)(t))}},{key:\"rotateY\",value:function(t){return this.multiply(Object(M.c)(t))}},{key:\"toString\",value:function(){return\"matrix3d(\".concat(this.m.toString(),\")\")}}]),t}(),S=/Trident/.test(navigator.userAgent),P=.6,A=function(t,e,n,a,r,c,i,o,u,s){var l,g,b,f,h,j,p,d,O,m,v,x,w,k,y,M,S,P,A,D,W,Y,q,F,X,E;if(!e.direction)return[];for(M=e.progress,j=e.direction,1===n&&\"left\"===j&&(M=1-M,j=\"right\"),g=(O=\"front\"===t?e.frontImage:e.backImage)&&\"url('\".concat(O,\"')\"),y=a/10,p=r,x=!1,1===n?\"back\"===t&&(x=!0,p=r-a):\"left\"===j?\"back\"===t?p=a:x=!0:\"front\"===t?p=a:x=!0,(k=new I).translate(p,c),w=0,M>.5&&(w=2*-(M-.5)*180),\"left\"===j&&(w=-w),\"back\"===t&&(w+=180),w&&(x&&k.translate(a),k.rotateY(w),x&&k.translate(-a)),0===(q=M<.5?2*M*Math.PI:(1-2*(M-.5))*Math.PI)&&(q=1e-9),A=a/q,P=0,W=(f=q/10)/2/Math.PI*180,h=f/Math.PI*180,x&&(W=-q/Math.PI*180+h/2),\"back\"===t&&(W=-W,h=-h),u(1/0),s(-1/0),D=[],d=m=0,10;m<10;d=++m)b=\"\".concat(d/9*100,\"% 0px\"),F=new I(k),S=x?q-P:P,X=Math.sin(S)*A,x&&(X=a-X),E=(1-Math.cos(S))*A,\"back\"===t&&(E=-E),F.translate(X),F.translateZ(E),F.rotateY(-W),(l=F.computeX())>o&&s(l),(l+=2*y)<i&&u(l),v=N(w-W,h),Y=\"perspective(\".concat(\"2400px\",\") \").concat(F.toString()),P+=f,W+=h,D.push([t+d,g,v,b,Y,Math.abs(Math.round(E))]);return D},N=function(t,e,n){var a,r,c,i,o;return c=[],i=[-.5,-.25,0,.25,.5],n<1&&(a=1-n,r=i.map((function(n){return(1-Math.cos((t-e*n)/180*Math.PI))*a})),c.push(\"linear-gradient(to right,\\n      rgba(0, 0, 0, \".concat(r[0],\"),\\n      rgba(0, 0, 0, \").concat(r[1],\") 25%,\\n      rgba(0, 0, 0, \").concat(r[2],\") 50%,\\n      rgba(0, 0, 0, \").concat(r[3],\") 75%,\\n      rgba(0, 0, 0, \").concat(r[4],\"))\"))),S||(30,200,o=i.map((function(n){return Math.max(Math.pow(Math.cos((t+30-e*n)/180*Math.PI),200),Math.pow(Math.cos((t-30-e*n)/180*Math.PI),200))})),c.push(\"linear-gradient(to right,\\n      rgba(255, 255, 255, \".concat(o[0]*P,\"),\\n      rgba(255, 255, 255, \").concat(o[1]*P,\") 25%,\\n      rgba(255, 255, 255, \").concat(o[2]*P,\") 50%,\\n      rgba(255, 255, 255, \").concat(o[3]*P,\") 75%,\\n      rgba(255, 255, 255, \").concat(o[4]*P,\"))\"))),c.join(\",\")},D=b()((function(t,e,n,a,r){return!t.direction&&e>=n&&!(1===n&&!function(t,e){return t[e]&&t[e].url||null}(r,a-1))})),W=b()((function(t,e,n,a){return!t.direction&&e<n-a})),Y=b()((function(t){var e;return e=t/10,(e=Math.ceil(e+1))+\"px\"})),q=b()((function(t){return t+\"px\"})),F=b()((function(t,e){return\"\".concat(t,\"px \").concat(e,\"px\")})),X=b()((function(t,e,n,a,r,c,i,o,u){return A(\"front\",t,e,n,a,r,c,i,o,u).concat(A(\"back\",t,e,n,a,r,c,i,o,u))})),E=(n(67),n(2)),H=void 0,z=function(t){var e=t.flipDuration,n=void 0===e?1e3:e,r=t.spaceTop,c=void 0===r?0:r,i=w.state,g=i.pageWidth,b=i.pageHeight,f=i.pages,j=i.leftPage,d=i.rightPage,O=Object(a.useState)(f.length),m=Object(l.a)(O,2),v=m[0],x=(m[1],Object(a.useState)(1)),k=Object(l.a)(x,2),y=k[0],M=k[1],I=Object(a.useState)(0),S=Object(l.a)(I,2),P=(S[0],S[1]),A=Object(a.useState)(0),N=Object(l.a)(A,2),z=(N[0],N[1]),B=Object(a.useState)(null),J=Object(l.a)(B,2),L=J[0],T=J[1],Z=Object(a.useState)(0),U=Object(l.a)(Z,2),$=U[0],C=U[1],G=Object(a.useState)(null),K=Object(l.a)(G,2),Q=K[0],R=K[1],V=Object(a.useState)(null),_=Object(l.a)(V,2),tt=_[0],et=_[1],nt=Object(a.useState)(!1),at=Object(l.a)(nt,2),rt=at[0],ct=(at[1],Object(a.useState)(1/0)),it=Object(l.a)(ct,2),ot=it[0],ut=it[1],st=Object(a.useState)(-1/0),lt=Object(l.a)(st,2),gt=lt[0],bt=lt[1],ft=Object(a.useState)({}),ht=Object(l.a)(ft,2),jt=ht[0],pt=(ht[1],Object(a.useState)({progress:0,direction:null,frontImage:null,backImage:null,auto:!1})),dt=Object(l.a)(pt,2),Ot=dt[0],mt=dt[1],vt=Object(a.useState)(0),xt=Object(l.a)(vt,2),wt=xt[0],kt=(xt[1],D(Ot,$,y,j,f)),yt=W(Ot,$,v,y),Mt=X(Ot,y,g,wt,c,ot,gt,ut,bt),It=F(g,b),St=Y(g),Pt=q(b);Object(a.useEffect)((function(){At(),Ht()}),[]),Object(a.useEffect)((function(){w.setState({leftPage:$,rightPage:$+1}),Ht()}),[$]);var At=function(){M(2*g>b?2:1)},Nt=function(t){return f[t]&&f[t].url||null},Dt=function(){var t=Object(s.a)(o.a.mark((function t(e,n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return mt(\"left\"===e?1===y?Object(u.a)(Object(u.a)({},Ot),{},{direction:e,frontImage:Nt($-1),backImage:null}):Object(u.a)(Object(u.a)({},Ot),{},{direction:e,frontImage:Nt(j),backImage:Nt($-y+1)}):1===y?Object(u.a)(Object(u.a)({},Ot),{},{direction:e,frontImage:Nt($),backImage:null}):Object(u.a)(Object(u.a)({},Ot),{},{direction:e,frontImage:Nt(d),backImage:Nt($+y)})),t.abrupt(\"return\",requestAnimationFrame((function(){return requestAnimationFrame((function(){if(\"left\"===e?2===y&&w.setState({leftPage:$-y}):1===y?w.setState({leftPage:$+y}):w.setState({rightPage:$+1+y}),n)return Wt(!0)}))})));case 2:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Wt=function(t){var e,a,r,c;return c=Date.now(),a=n*(1-Ot.progress),r=Ot.progress,mt(Object(u.a)(Object(u.a)({},Ot),{},{auto:!0})),(e=function(){return requestAnimationFrame((function(){var n,i;if(i=Date.now()-c,(n=r+i/a)>1&&(n=1),mt(Object(u.a)(Object(u.a)({},Ot),{},{progress:t?h(n):n})),n<1)return e();\"left\"===Ot.direction?C($-y):C($+y),1===y&&\"right\"===Ot.direction?mt(Object(u.a)(Object(u.a)({},Ot),{},{direction:null})):Yt(1,(function(){console.log(\"callback here\"),mt(Object(u.a)(Object(u.a)({},Ot),{},{direction:null,auto:!1,progress:0}))}))}))})()},Yt=function(t,e){P(0),z(t),T(e)},qt=function(t){L&&L()},Ft=function(t){return null===Ot.direction||Ot.auto||(Ot.progress>1/4?Wt(!1):function(){var t,e,a,r;r=Date.now(),e=n*Ot.progress,a=Ot.progress,mt(Object(u.a)(Object(u.a)({},Ot),{},{auto:!0})),(t=function(){return requestAnimationFrame((function(){var n,c;return c=Date.now()-r,(n=a-a*c/e)<0&&(n=0),mt(Object(u.a)(Object(u.a)({},Ot),{},{progress:n})),n>0?t():(w.setState({leftPage:$,rightPage:$+1}),1===y&&\"left\"===Ot.direction?mt(Object(u.a)(Object(u.a)({},Ot),{},{direction:null,auto:!1})):Yt(1,(function(){mt(Object(u.a)(Object(u.a)({},Ot),{},{direction:null,auto:!1}))})),!1)}))})()}()),R(null),null},Xt=function(t){var e;if(!rt&&(!t.which||1===t.which))return R((e=t).pageX),void et(e.pageY)},Et=function(t){if(!rt&&(!t.which||1===t.which))return function(t){var e,n;if(null!=Q&&(e=t.pageX-Q,n=t.pageY-tt,!(Math.abs(n)>Math.abs(e))))return e>0?(null===Ot.direction&&kt&&e>=5&&Dt(\"left\",!1),\"left\"===Ot.direction&&mt(Object(u.a)(Object(u.a)({},Ot),{},{progress:e/g<1?e/g:1}))):(null===Ot.direction&&yt&&e<=-5&&Dt(\"right\",!1),\"right\"===Ot.direction&&mt(Object(u.a)(Object(u.a)({},Ot),{},{progress:-e/g<1?-e/g:1}))),!0}(t)},Ht=function(){var t,e,n,a,r,c,i;for(Object.keys(jt).length>=10&&(H.preloadedImages={}),c=[],t=n=a=$-3,r=$+3;a<=r?n<=r:n>=r;t=a<=r?++n:--n)(i=Nt(t))?jt[i]?c.push(void 0):((e=new Image).src=i,c.push(jt[i]=e)):c.push(void 0);return c};return Object(E.jsx)(p.c,{to:[w],children:function(t){var e=t.state,n=e.pageWidth,a=e.pageHeight,r=e.leftPage,i=e.rightPage;return Object(E.jsx)(\"div\",{onMouseDown:function(t){return Xt(t)},onMouseMove:function(t){return Et(t)},onMouseUp:function(t){return function(t){if(!rt)return Ft()}()},style:{width:n*y+\"px\",height:a+\"px\",margin:\"auto\"},children:Object(E.jsx)(\"div\",{className:\"viewport\",children:Object(E.jsxs)(\"div\",{className:\"container\",style:{width:\"100%\"},children:[Object(E.jsxs)(\"div\",{className:\"centering-box\",style:{width:n*y},children:[Nt(r)&&Object(E.jsx)(\"img\",{className:\"page fixed\",style:{width:n+\"px\",height:a+\"px\",left:wt+\"px\",top:c+\"px\"},src:Nt(r),onLoad:function(t){return qt()}}),2===y&&Nt(i)&&Object(E.jsx)(\"img\",{className:\"page fixed\",style:{width:n+\"px\",height:a+\"px\",left:n+\"px\",top:c+\"px\"},src:Nt(i),onLoad:function(t){return qt()}}),Mt.map((function(t,e){return Object(E.jsx)(\"div\",{className:t[1]?\"polygon blank\":\"polygon\",style:{backgroundImage:t[1],backgroundSize:It,backgroundPosition:t[3],width:St,height:Pt,transform:t[4],zIndex:t[5]},children:t[2].length&&Object(E.jsx)(\"div\",{className:\"lighting\",style:{backgroundImage:t[2]}})},e)}))]}),Object(E.jsx)(\"div\",{className:\"guard\"})]})})})}})};n(69);var B=function(){return Object(E.jsx)(p.b,{children:Object(E.jsx)(\"div\",{id:\"app\",children:Object(E.jsx)(z,{})})})};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(E.jsx)(B,{}),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[70,1,2]]]);","name":"static/js/main.0cb1d92f.chunk.js","map":{"version":3,"sources":["static/js/main.0cb1d92f.chunk.js"],"names":["this","push","30","module","exports","__webpack_require__","67","69","70","__webpack_exports__","r","react","react_dom","react_dom_default","n","regenerator","regenerator_default","objectSpread2","asyncToGenerator","slicedToArray","memoize","memoize_default","easeIn","x","Math","pow","easeInOut","easeOut","helper_pageUrl","page","pages","unstated_es","displayedPages","viewWidth","xMargin","rightPage","maxX","leftPage","minX","imageWidth","pageScale","round","imageHeight","pageWidth","console","log","viewHeight","pageHeight","currentCenterOffset","classCallCheck","inherits","createSuper","initPages","url","id","FlipBookContainer","_Container","Object","FlipBookStore","_super","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","Stores_Flipbook","window","thaycacac","toConsumableArray","createClass","rematrix_es","matrix_Matrix","Matrix","arg","isArray","m","key","value","y","multiply","z","deg","toString","IE","test","navigator","userAgent","gloss","computed_makePolygonArray","face","flip","spaceTop","setMinX","setMaxX","ax","bgImg","bgPos","dRadian","dRotate","direction","gx","i","image","j","lighting","originRight","pageRotation","pageTransform","polygonWidth","progress","rad","radian","radius","results","rotate","tfString","theta","transform","frontImage","backImage","translate","rotateY","PI","Infinity","sin","cos","translateZ","computeX","computeLighting","abs","rot","ambient","blackness","diffuse","gradients","lightingPoints","specular","map","d","max","join","_canFlipLeft","currentPage","computed_pageUrl","_canFlipRight","nPages","_polygonWidth","w","ceil","_polygonHeight","_polygonBgSize","_polygonArray","jsx_runtime","Flipbook_this","undefined","components_Flipbook","_ref","_ref$flipDuration","flipDuration","_ref$spaceTop","_FlipBookContainer$st","_useState","_useState2","_useState3","_useState4","setDisplayedPages","_useState5","_useState6","setNImageLoad","_useState7","_useState8","setNImageLoadTrigger","_useState9","_useState10","imageLoadCallback","setImageLoadCallback","_useState11","_useState12","setCurrentPage","_useState13","_useState14","touchStartX","setTouchStartX","_useState15","_useState16","touchStartY","setTouchStartY","_useState17","_useState18","hasPointerEvents","_useState19","_useState20","_useState21","_useState22","_useState23","_useState24","preloadedImages","_useState25","auto","_useState26","setFlip","_useState27","_useState28","canFlipLeft","canFlipRight","polygonArray","polygonBgSize","polygonHeight","onResize","preloadImages","setState","pageUrl","flipStart","_ref2","a","mark","_callee","wrap","_context","prev","next","abrupt","requestAnimationFrame","flipAuto","stop","_x","_x2","ease","_animate","duration","startRatio","t0","Date","now","ratio","t","onImageLoad","trigger","cb","didLoadImage","ev","swipeEnd","touch","_animate2","flipRevert","_onMouseDown","which","pageX","pageY","_onMouseMove","swipeMove","img","ref","ref1","keys","Image","src","to","children","flipBookContainer","_flipBookContainer$st","onMouseDown","onMouseMove","onMouseUp","_onMouseUp","style","width","height","margin","className","left","top","onLoad","$event","item","index","backgroundImage","backgroundSize","backgroundPosition","zIndex","src_App","Boolean","location","hostname","match","render","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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"},"input":"(this[\"webpackJsonpflip-book-react-master\"] = this[\"webpackJsonpflip-book-react-master\"] || []).push([[0],{\n\n/***/ 30:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(19);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(15);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/lodash/memoize.js\nvar memoize = __webpack_require__(3);\nvar memoize_default = /*#__PURE__*/__webpack_require__.n(memoize);\n\n// CONCATENATED MODULE: ./src/helper.js\nvar easeIn=function easeIn(x){return Math.pow(x,2);};var easeOut=function easeOut(x){return 1-easeIn(1-x);};var easeInOut=function easeInOut(x){if(x<0.5){return easeIn(x*2)/2;}else{return 0.5+easeOut((x-0.5)*2)/2;}};var helper_pageUrl=function pageUrl(page,pages){return pages[page]||null;};var boundingRight=function boundingRight(displayedPages,viewWidth,xMargin,rightPage,maxX,pages){if(displayedPages===1){return viewWidth-xMargin;}else{var x=helper_pageUrl(rightPage,pages)?viewWidth-xMargin:viewWidth/2;return x>maxX?x:maxX;}};var boundingLeft=function boundingLeft(displayedPages,viewWidth,xMargin,leftPage,minX,pages){if(displayedPages===1){return xMargin;}else{var x=helper_pageUrl(leftPage,pages)?xMargin:viewWidth/2;return x<minX?x:minX;}};var helper_pageWidth=function pageWidth(imageWidth,pageScale){return Math.round(imageWidth*pageScale);};var helper_pageHeight=function pageHeight(imageHeight,pageScale){return Math.round(imageHeight*pageScale);};var helper_xMargin=function xMargin(viewWidth,pageWidth,displayedPages){console.log('xMargin',viewWidth,pageWidth,displayedPages);return(viewWidth-pageWidth*displayedPages)/2;};var yMargin=function yMargin(viewHeight,pageHeight){return(viewHeight-pageHeight)/2;};var centerOffsetSmoothed=function centerOffsetSmoothed(currentCenterOffset){return Math.round(currentCenterOffset);};var _pageUrl=memoize_default()(helper_pageUrl);var _boundingRight=memoize_default()(boundingRight);var _boundingLeft=memoize_default()(boundingLeft);var _pageWidth=memoize_default()(helper_pageWidth);var _pageHeight=memoize_default()(helper_pageHeight);var _xMargin=memoize_default()(helper_xMargin);var _yMargin=memoize_default()(yMargin);var _centerOffsetSmoothed=memoize_default()(centerOffsetSmoothed);\n// EXTERNAL MODULE: ./node_modules/unstated/lib/unstated.es.js\nvar unstated_es = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 5 modules\nvar createSuper = __webpack_require__(23);\n\n// CONCATENATED MODULE: ./src/Stores/Flipbook.js\nvar initPages=[null,{url:\"images/1.jpg\",id:'8182045543'},{url:\"images/2.jpg\",id:\"4591469984\"},{url:\"images/3.jpg\",id:\"3816263638\"},{url:\"images/4.jpg\",id:\"7912047691\"},{url:\"images/5.jpg\",id:\"4944943318\"},{url:\"images/6.jpg\",id:\"3800999370\"}];var Flipbook_FlipBookStore=/*#__PURE__*/function(_Container){Object(inherits[\"a\" /* default */])(FlipBookStore,_Container);var _super=Object(createSuper[\"a\" /* default */])(FlipBookStore);function FlipBookStore(){var _this;Object(classCallCheck[\"a\" /* default */])(this,FlipBookStore);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={pageWidth:640,pageHeight:906,pages:initPages,leftPage:0,rightPage:1};return _this;}return FlipBookStore;}(unstated_es[\"a\" /* Container */]);var FlipBookContainer=new Flipbook_FlipBookStore();/* harmony default export */ var Stores_Flipbook = (FlipBookContainer);window.thaycacac=FlipBookContainer;\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/rematrix/dist/rematrix.es.js\nvar rematrix_es = __webpack_require__(6);\n\n// CONCATENATED MODULE: ./src/matrix.js\nvar matrix_Matrix=/*#__PURE__*/function(){function Matrix(arg){Object(classCallCheck[\"a\" /* default */])(this,Matrix);if(arg){if(Array.isArray(arg)){this.m=arg;}else{this.m=Object(toConsumableArray[\"a\" /* default */])(arg.m);}}else{this.m=Object(rematrix_es[\"a\" /* identity */])();}}Object(createClass[\"a\" /* default */])(Matrix,[{key:\"multiply\",value:function multiply(m){if(!Array.isArray(m)){m=m.m;}return this.m=Object(rematrix_es[\"b\" /* multiply */])(this.m,m);}},{key:\"computeX\",value:function computeX(){return this.m[12];}},{key:\"translate\",value:function translate(x,y){return this.multiply(Object(rematrix_es[\"d\" /* translate */])(x,y));}},{key:\"translateZ\",value:function translateZ(z){return this.multiply(Object(rematrix_es[\"e\" /* translateZ */])(z));}},{key:\"rotateY\",value:function rotateY(deg){return this.multiply(Object(rematrix_es[\"c\" /* rotateY */])(deg));}},{key:\"toString\",value:function toString(){return\"matrix3d(\".concat(this.m.toString(),\")\");}}]);return Matrix;}();;\n// CONCATENATED MODULE: ./src/computed.js\nvar IE=/Trident/.test(navigator.userAgent);var gloss=0.6;var nPolygons=10;var perspective='2400px';var computed_pageUrl=function pageUrl(pages,page){if(!pages[page])return null;// if (!pages[page].url) return default\nreturn pages[page].url||null;};var computed_canFlipLeft=function canFlipLeft(flip,currentPage,displayedPages,leftPage,pages){return!flip.direction&&currentPage>=displayedPages&&!(displayedPages===1&&!computed_pageUrl(pages,leftPage-1));};var computed_canFlipRight=function canFlipRight(flip,currentPage,nPages,displayedPages){return!flip.direction&&currentPage<nPages-displayedPages;};var computed_polygonWidth=function polygonWidth(pageWidth){var w;w=pageWidth/nPolygons;w=Math.ceil(w+1);return w+'px';};var computed_polygonHeight=function polygonHeight(pageHeight){return pageHeight+'px';};var computed_polygonBgSize=function polygonBgSize(pageWidth,pageHeight){return\"\".concat(pageWidth,\"px \").concat(pageHeight,\"px\");};var computed_makePolygonArray=function makePolygonArray(face,flip,displayedPages,pageWidth,xMargin,spaceTop,minX,maxX,setMinX,setMaxX){var ax,bgImg,bgPos,dRadian,dRotate,direction,gx,i,image,j,lighting,originRight,pageRotation,pageTransform,polygonWidth,progress,rad,radian,radius,ref,results,rotate,tfString,theta,transform,x,z;if(!flip.direction){return[];}progress=flip.progress;direction=flip.direction;if(displayedPages===1&&direction==='left'){progress=1-progress;direction='right';}image=face==='front'?flip.frontImage:flip.backImage;bgImg=image&&\"url('\".concat(image,\"')\");polygonWidth=pageWidth/nPolygons;gx=xMargin;originRight=false;if(displayedPages===1){if(face==='back'){originRight=true;gx=xMargin-pageWidth;}}else{if(direction==='left'){if(face==='back'){gx=pageWidth;}else{originRight=true;}}else{if(face==='front'){gx=pageWidth;}else{originRight=true;}}}pageTransform=new matrix_Matrix();pageTransform.translate(gx,spaceTop);pageRotation=0;if(progress>0.5){pageRotation=-(progress-0.5)*2*180;}if(direction==='left'){pageRotation=-pageRotation;}if(face==='back'){pageRotation+=180;}if(pageRotation){if(originRight){pageTransform.translate(pageWidth);}pageTransform.rotateY(pageRotation);if(originRight){pageTransform.translate(-pageWidth);}}if(progress<0.5){theta=progress*2*Math.PI;}else{theta=(1-(progress-0.5)*2)*Math.PI;}if(theta===0){theta=1e-9;}radius=pageWidth/theta;radian=0;dRadian=theta/nPolygons;rotate=dRadian/2/Math.PI*180;dRotate=dRadian/Math.PI*180;if(originRight){rotate=-theta/Math.PI*180+dRotate/2;}if(face==='back'){rotate=-rotate;dRotate=-dRotate;}setMinX(Infinity);setMaxX(-Infinity);results=[];for(i=j=0,ref=nPolygons;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){bgPos=\"\".concat(i/(nPolygons-1)*100,\"% 0px\");transform=new matrix_Matrix(pageTransform);rad=originRight?theta-radian:radian;x=Math.sin(rad)*radius;if(originRight){x=pageWidth-x;}z=(1-Math.cos(rad))*radius;if(face==='back'){z=-z;}transform.translate(x);transform.translateZ(z);transform.rotateY(-rotate);ax=transform.computeX();if(ax>maxX){setMaxX(ax);}ax+=2*polygonWidth;if(ax<minX){setMinX(ax);}lighting=computeLighting(pageRotation-rotate,dRotate);tfString=\"perspective(\".concat(perspective,\") \").concat(transform.toString());radian+=dRadian;rotate+=dRotate;results.push([face+i,bgImg,lighting,bgPos,tfString,Math.abs(Math.round(z))]);}return results;};var computeLighting=function computeLighting(rot,dRotate,ambient){var DEG,POW,blackness,diffuse,gradients,lightingPoints,specular;gradients=[];lightingPoints=[-0.5,-0.25,0,0.25,0.5];if(ambient<1){blackness=1-ambient;diffuse=lightingPoints.map(function(d){return(1-Math.cos((rot-dRotate*d)/180*Math.PI))*blackness;});gradients.push(\"linear-gradient(to right,\\n      rgba(0, 0, 0, \".concat(diffuse[0],\"),\\n      rgba(0, 0, 0, \").concat(diffuse[1],\") 25%,\\n      rgba(0, 0, 0, \").concat(diffuse[2],\") 50%,\\n      rgba(0, 0, 0, \").concat(diffuse[3],\") 75%,\\n      rgba(0, 0, 0, \").concat(diffuse[4],\"))\"));}if(gloss>0&&!IE){DEG=30;POW=200;specular=lightingPoints.map(function(d){return Math.max(Math.pow(Math.cos((rot+DEG-dRotate*d)/180*Math.PI),POW),Math.pow(Math.cos((rot-DEG-dRotate*d)/180*Math.PI),POW));});gradients.push(\"linear-gradient(to right,\\n      rgba(255, 255, 255, \".concat(specular[0]*gloss,\"),\\n      rgba(255, 255, 255, \").concat(specular[1]*gloss,\") 25%,\\n      rgba(255, 255, 255, \").concat(specular[2]*gloss,\") 50%,\\n      rgba(255, 255, 255, \").concat(specular[3]*gloss,\") 75%,\\n      rgba(255, 255, 255, \").concat(specular[4]*gloss,\"))\"));}return gradients.join(',');};var computed_polygonArray=function polygonArray(flip,displayedPages,pageWidth,xMargin,spaceTop,minX,maxX,setMinX,setMaxX){return computed_makePolygonArray('front',flip,displayedPages,pageWidth,xMargin,spaceTop,minX,maxX,setMinX,setMaxX).concat(computed_makePolygonArray('back',flip,displayedPages,pageWidth,xMargin,spaceTop,minX,maxX,setMinX,setMaxX));};var _canFlipLeft=memoize_default()(computed_canFlipLeft);var _canFlipRight=memoize_default()(computed_canFlipRight);var _polygonWidth=memoize_default()(computed_polygonWidth);var _polygonHeight=memoize_default()(computed_polygonHeight);var _polygonBgSize=memoize_default()(computed_polygonBgSize);var _polygonArray=memoize_default()(computed_polygonArray);\n// EXTERNAL MODULE: ./src/components/Styles.css\nvar Styles = __webpack_require__(67);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/components/Flipbook.js\nvar Flipbook_this=undefined;var Flipbook_Flipbook=function Flipbook(_ref){var _ref$flipDuration=_ref.flipDuration,flipDuration=_ref$flipDuration===void 0?1000:_ref$flipDuration,_ref$spaceTop=_ref.spaceTop,spaceTop=_ref$spaceTop===void 0?0:_ref$spaceTop;var flipInit={progress:0,direction:null,frontImage:null,backImage:null,auto:false};var _FlipBookContainer$st=Stores_Flipbook.state,pageWidth=_FlipBookContainer$st.pageWidth,pageHeight=_FlipBookContainer$st.pageHeight,pages=_FlipBookContainer$st.pages,leftPage=_FlipBookContainer$st.leftPage,rightPage=_FlipBookContainer$st.rightPage;var _useState=Object(react[\"useState\"])(pages.length),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),nPages=_useState2[0],setNPages=_useState2[1];var _useState3=Object(react[\"useState\"])(1),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),displayedPages=_useState4[0],setDisplayedPages=_useState4[1];var _useState5=Object(react[\"useState\"])(0),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),nImageLoad=_useState6[0],setNImageLoad=_useState6[1];var _useState7=Object(react[\"useState\"])(0),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),nImageLoadTrigger=_useState8[0],setNImageLoadTrigger=_useState8[1];var _useState9=Object(react[\"useState\"])(null),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),imageLoadCallback=_useState10[0],setImageLoadCallback=_useState10[1];var _useState11=Object(react[\"useState\"])(0),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),currentPage=_useState12[0],setCurrentPage=_useState12[1];var _useState13=Object(react[\"useState\"])(null),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),touchStartX=_useState14[0],setTouchStartX=_useState14[1];var _useState15=Object(react[\"useState\"])(null),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),touchStartY=_useState16[0],setTouchStartY=_useState16[1];var _useState17=Object(react[\"useState\"])(false),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),hasPointerEvents=_useState18[0],setHasPointerEvents=_useState18[1];var _useState19=Object(react[\"useState\"])(Infinity),_useState20=Object(slicedToArray[\"a\" /* default */])(_useState19,2),minX=_useState20[0],setMinX=_useState20[1];var _useState21=Object(react[\"useState\"])(-Infinity),_useState22=Object(slicedToArray[\"a\" /* default */])(_useState21,2),maxX=_useState22[0],setMaxX=_useState22[1];var _useState23=Object(react[\"useState\"])({}),_useState24=Object(slicedToArray[\"a\" /* default */])(_useState23,2),preloadedImages=_useState24[0],setPreloadedImages=_useState24[1];var _useState25=Object(react[\"useState\"])(flipInit),_useState26=Object(slicedToArray[\"a\" /* default */])(_useState25,2),flip=_useState26[0],setFlip=_useState26[1];var _useState27=Object(react[\"useState\"])(0),_useState28=Object(slicedToArray[\"a\" /* default */])(_useState27,2),xMargin=_useState28[0],setXMargin=_useState28[1];// this.pageWidth * 2 - this.pageWidth * this.displayedPages) / 2\n// computed\nvar canFlipLeft=_canFlipLeft(flip,currentPage,displayedPages,leftPage,pages);var canFlipRight=_canFlipRight(flip,currentPage,nPages,displayedPages);var polygonArray=_polygonArray(flip,displayedPages,pageWidth,xMargin,spaceTop,minX,maxX,setMinX,setMaxX);var polygonBgSize=_polygonBgSize(pageWidth,pageHeight);var polygonWidth=_polygonWidth(pageWidth);var polygonHeight=_polygonHeight(pageHeight);Object(react[\"useEffect\"])(function(){onResize();preloadImages();},[]);Object(react[\"useEffect\"])(function(){Stores_Flipbook.setState({leftPage:currentPage,rightPage:currentPage+1});preloadImages();},[currentPage]);// method\nvar onResize=function onResize(){setDisplayedPages(pageWidth*2>pageHeight?2:1);};var logEvery=function logEvery(){console.log({currentPage:currentPage,displayedPages:displayedPages,flip:flip,hasPointerEvents:hasPointerEvents,imageLoadCallback:imageLoadCallback,leftPage:leftPage,maxX:maxX,minX:minX,nImageLoad:nImageLoad,nImageLoadTrigger:nImageLoadTrigger,nPages:nPages,pageHeight:pageHeight,pageWidth:pageWidth,preloadedImages:preloadImages,rightPage:rightPage,touchStartX:touchStartX,touchStartY:touchStartY,canFlipLeft:canFlipLeft,canFlipRight:canFlipRight,polygonArray:polygonArray,polygonBgSize:polygonBgSize,polygonWidth:polygonWidth,polygonHeight:polygonHeight});};var pageUrl=function pageUrl(page){if(!pages[page])return null;// if (!pages[page].url) return default\nreturn pages[page].url||null;};var flipStart=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(direction,auto){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(direction==='left'){if(displayedPages===1){setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:direction,frontImage:pageUrl(currentPage-1),backImage:null}));}else{setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:direction,frontImage:pageUrl(leftPage),backImage:pageUrl(currentPage-displayedPages+1)}));}}else{if(displayedPages===1){setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:direction,frontImage:pageUrl(currentPage),backImage:null}));}else{setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:direction,frontImage:pageUrl(rightPage),backImage:pageUrl(currentPage+displayedPages)}));}}return _context.abrupt(\"return\",requestAnimationFrame(function(){return requestAnimationFrame(function(){if(direction==='left'){if(displayedPages===2){Stores_Flipbook.setState({leftPage:currentPage-displayedPages});}}else{if(displayedPages===1){Stores_Flipbook.setState({leftPage:currentPage+displayedPages});}else{Stores_Flipbook.setState({rightPage:currentPage+1+displayedPages});}}if(auto){return flipAuto(true);}});}));case 2:case\"end\":return _context.stop();}}},_callee);}));return function flipStart(_x,_x2){return _ref2.apply(this,arguments);};}();var flipAuto=function flipAuto(ease){var _animate,duration,startRatio,t0;t0=Date.now();duration=flipDuration*(1-flip.progress);startRatio=flip.progress;setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{auto:true}));_animate=function animate(){return requestAnimationFrame(function(){var ratio,t;t=Date.now()-t0;ratio=startRatio+t/duration;if(ratio>1){ratio=1;}setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{progress:ease?easeInOut(ratio):ratio}));if(ratio<1){return _animate();}else{if(flip.direction==='left'){setCurrentPage(currentPage-displayedPages);}else{setCurrentPage(currentPage+displayedPages);}if(displayedPages===1&&flip.direction==='right'){setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:null}));}else{onImageLoad(1,function(){console.log('callback here');setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:null,auto:false,progress:0}));});}}});};return _animate();};var flipRevert=function flipRevert(){var _animate2,duration,startRatio,t0;t0=Date.now();duration=flipDuration*flip.progress;startRatio=flip.progress;setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{auto:true}));_animate2=function animate(){return requestAnimationFrame(function(){var ratio,t;t=Date.now()-t0;ratio=startRatio-startRatio*t/duration;if(ratio<0){ratio=0;}setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{progress:ratio}));if(ratio>0){return _animate2();}else{Stores_Flipbook.setState({leftPage:currentPage,rightPage:currentPage+1});if(displayedPages===1&&flip.direction==='left'){setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:null,auto:false}));}else{onImageLoad(1,function(){setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{direction:null,auto:false}));});}return false;}});};return _animate2();};var onImageLoad=function onImageLoad(trigger,cb){setNImageLoad(0);setNImageLoadTrigger(trigger);setImageLoadCallback(cb);};var didLoadImage=function didLoadImage(ev){if(!imageLoadCallback){return;}imageLoadCallback();};var swipeStart=function swipeStart(touch){setTouchStartX(touch.pageX);setTouchStartY(touch.pageY);};var swipeMove=function swipeMove(touch){var x,y;if(touchStartX==null){return;}x=touch.pageX-touchStartX;y=touch.pageY-touchStartY;if(Math.abs(y)>Math.abs(x)){return;}if(x>0){if(flip.direction===null&&canFlipLeft&&x>=5){flipStart('left',false);}if(flip.direction==='left'){setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{progress:x/pageWidth<1?x/pageWidth:1}));}}else{if(flip.direction===null&&canFlipRight&&x<=-5){flipStart('right',false);}if(flip.direction==='right'){setFlip(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},flip),{},{progress:-x/pageWidth<1?-x/pageWidth:1}));}}return true;};var swipeEnd=function swipeEnd(touch){if(flip.direction!==null&&!flip.auto){if(flip.progress>1/4){flipAuto(false);}else{flipRevert();}}setTouchStartX(null);return null;};var _onMouseDown=function onMouseDown(ev){if(hasPointerEvents){return;}if(ev.which&&ev.which!==1){return;}return swipeStart(ev);};var _onMouseMove=function onMouseMove(ev){if(hasPointerEvents){return;}if(ev.which&&ev.which!==1){return;}// Ignore right-click\nreturn swipeMove(ev);};var _onMouseUp=function onMouseUp(ev){if(!hasPointerEvents){return swipeEnd(ev);}};var preloadImages=function preloadImages(){var i,img,j,ref,ref1,results,url;if(Object.keys(preloadedImages).length>=10){Flipbook_this.preloadedImages={};}results=[];for(i=j=ref=currentPage-3,ref1=currentPage+3;ref<=ref1?j<=ref1:j>=ref1;i=ref<=ref1?++j:--j){url=pageUrl(i);if(url){if(!preloadedImages[url]){img=new Image();img.src=url;results.push(preloadedImages[url]=img);}else{results.push(void 0);}}else{results.push(void 0);}}return results;};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(unstated_es[\"c\" /* Subscribe */],{to:[Stores_Flipbook],children:function children(flipBookContainer){var _flipBookContainer$st=flipBookContainer.state,pageWidth=_flipBookContainer$st.pageWidth,pageHeight=_flipBookContainer$st.pageHeight,leftPage=_flipBookContainer$st.leftPage,rightPage=_flipBookContainer$st.rightPage;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{onMouseDown:function onMouseDown(ev){return _onMouseDown(ev);},onMouseMove:function onMouseMove(ev){return _onMouseMove(ev);},onMouseUp:function onMouseUp(ev){return _onMouseUp(ev);},style:{width:pageWidth*displayedPages+'px',height:pageHeight+'px',margin:'auto'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"viewport\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",style:{width:'100%'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"centering-box\",style:{width:pageWidth*displayedPages},children:[pageUrl(leftPage)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"page fixed\",style:{width:pageWidth+'px',height:pageHeight+'px',left:xMargin+'px',top:spaceTop+'px'},src:pageUrl(leftPage),onLoad:function onLoad($event){return didLoadImage($event);}}),displayedPages===2&&pageUrl(rightPage)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"page fixed\",style:{width:pageWidth+'px',height:pageHeight+'px',left:pageWidth+'px',top:spaceTop+'px'},src:pageUrl(rightPage),onLoad:function onLoad($event){return didLoadImage($event);}}),polygonArray.map(function(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:item[1]?'polygon blank':'polygon',style:{backgroundImage:item[1],backgroundSize:polygonBgSize,backgroundPosition:item[3],width:polygonWidth,height:polygonHeight,transform:item[4],zIndex:item[5]},children:item[2].length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"lighting\",style:{backgroundImage:item[2]}})},index);})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"guard\"})]})})});}});};/* harmony default export */ var components_Flipbook = (Flipbook_Flipbook);\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(69);\n\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(unstated_es[\"b\" /* Provider */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"app\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Flipbook,{})})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/serviceWorker.js\n// This optional code is used to register a service worker.\n// register() is not called by default.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\nvar isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.0/8 are considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(config){if( true&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nvar publicUrl=new URL(\"/chungwuhsing/flip-book-react-master.git\",window.location.href);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebook/create-react-app/issues/2374\nreturn;}window.addEventListener('load',function(){var swUrl=\"\".concat(\"/chungwuhsing/flip-book-react-master.git\",\"/service-worker.js\");if(isLocalhost){// This is running on localhost. Let's check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl,config);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(function(){console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://bit.ly/CRA-PWA');});}else{// Is not localhost. Just register service worker\nregisterValidSW(swUrl,config);}});}}function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(function(registration){registration.onupdatefound=function(){var installingWorker=registration.installing;if(installingWorker==null){return;}installingWorker.onstatechange=function(){if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the updated precached content has been fetched,\n// but the previous service worker will still serve the older\n// content until all client tabs are closed.\nconsole.log('New content is available and will be used when all '+'tabs for this page are closed. See https://bit.ly/CRA-PWA.');// Execute callback\nif(config&&config.onUpdate){config.onUpdate(registration);}}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');// Execute callback\nif(config&&config.onSuccess){config.onSuccess(registration);}}}};};}).catch(function(error){console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl,config){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl,{headers:{'Service-Worker':'script'}}).then(function(response){// Ensure service worker exists, and that we really are getting a JS file.\nvar contentType=response.headers.get('content-type');if(response.status===404||contentType!=null&&contentType.indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(function(registration){registration.unregister().then(function(){window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl,config);}}).catch(function(){console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(function(registration){registration.unregister();}).catch(function(error){console.error(error.message);});}}\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n\n/***/ })\n\n},[[70,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\inrich.peter\\flip-book-react-master\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\inrich.peter\\flip-book-react-master\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\inrich.peter\\flip-book-react-master\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\inrich.peter\\flip-book-react-master\\src\\index.css","C:\\inrich.peter\\flip-book-react-master\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\inrich.peter\\flip-book-react-master\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\inrich.peter\\flip-book-react-master\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\inrich.peter\\flip-book-react-master\\src\\components\\Styles.css","C:\\inrich.peter\\flip-book-react-master\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\inrich.peter\\flip-book-react-master\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\inrich.peter\\flip-book-react-master\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\inrich.peter\\flip-book-react-master\\src\\App.css","C:/inrich.peter/flip-book-react-master/src/helper.js","C:/inrich.peter/flip-book-react-master/src/Stores/Flipbook.js","C:/inrich.peter/flip-book-react-master/src/matrix.js","C:/inrich.peter/flip-book-react-master/src/computed.js","C:/inrich.peter/flip-book-react-master/src/components/Flipbook.js","C:/inrich.peter/flip-book-react-master/src/App.js","C:/inrich.peter/flip-book-react-master/src/serviceWorker.js","C:/inrich.peter/flip-book-react-master/src/index.js"],"names":["easeIn","x","Math","pow","easeOut","easeInOut","pageUrl","page","pages","boundingRight","displayedPages","viewWidth","xMargin","rightPage","maxX","boundingLeft","leftPage","minX","pageWidth","imageWidth","pageScale","round","pageHeight","imageHeight","console","log","yMargin","viewHeight","centerOffsetSmoothed","currentCenterOffset","_pageUrl","memoize","_boundingRight","_boundingLeft","_pageWidth","_pageHeight","_xMargin","_yMargin","_centerOffsetSmoothed","initPages","url","id","FlipBookStore","state","Container","FlipBookContainer","window","thaycacac","Matrix","arg","Array","isArray","m","identity","multiply","y","translate","z","translateZ","deg","rotateY","toString","IE","test","navigator","userAgent","gloss","nPolygons","perspective","canFlipLeft","flip","currentPage","direction","canFlipRight","nPages","polygonWidth","w","ceil","polygonHeight","polygonBgSize","makePolygonArray","face","spaceTop","setMinX","setMaxX","ax","bgImg","bgPos","dRadian","dRotate","gx","i","image","j","lighting","originRight","pageRotation","pageTransform","progress","rad","radian","radius","ref","results","rotate","tfString","theta","transform","frontImage","backImage","PI","Infinity","sin","cos","computeX","computeLighting","push","abs","rot","ambient","DEG","POW","blackness","diffuse","gradients","lightingPoints","specular","map","d","max","join","polygonArray","concat","_canFlipLeft","_canFlipRight","_polygonWidth","_polygonHeight","_polygonBgSize","_polygonArray","Flipbook","flipDuration","flipInit","auto","useState","length","setNPages","setDisplayedPages","nImageLoad","setNImageLoad","nImageLoadTrigger","setNImageLoadTrigger","imageLoadCallback","setImageLoadCallback","setCurrentPage","touchStartX","setTouchStartX","touchStartY","setTouchStartY","hasPointerEvents","setHasPointerEvents","preloadedImages","setPreloadedImages","setFlip","setXMargin","useEffect","onResize","preloadImages","setState","logEvery","flipStart","requestAnimationFrame","flipAuto","ease","animate","duration","startRatio","t0","Date","now","ratio","t","onImageLoad","flipRevert","trigger","cb","didLoadImage","ev","swipeStart","touch","pageX","pageY","swipeMove","swipeEnd","onMouseDown","which","onMouseMove","onMouseUp","img","ref1","Object","keys","Image","src","flipBookContainer","width","height","margin","left","top","$event","item","index","backgroundImage","backgroundSize","backgroundPosition","zIndex","App","isLocalhost","Boolean","location","hostname","match","register","config","process","publicUrl","URL","href","origin","addEventListener","swUrl","checkValidServiceWorker","serviceWorker","ready","then","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","fetch","headers","response","contentType","get","status","indexOf","unregister","reload","message","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import memoize from 'lodash/memoize'\n\nexport const easeIn = x => Math.pow(x, 2);\n\nexport const easeOut = x => 1 - easeIn(1 - x);\n\nexport const easeInOut = function(x) {\n  if (x < 0.5) { return easeIn(x * 2) / 2; } else { return 0.5 + (easeOut((x - 0.5) * 2) / 2); }\n};\n\nconst pageUrl = (page, pages) => {\n  return pages[page] || null\n}\n\nconst boundingRight = (displayedPages, viewWidth, xMargin, rightPage, maxX, pages) => {\n  if (displayedPages === 1) { return viewWidth - xMargin }\n  else {\n      const x = pageUrl(rightPage, pages) ? viewWidth - xMargin : viewWidth / 2\n      return x > maxX ? x : maxX\n  }\n}\n\nconst boundingLeft = (displayedPages, viewWidth, xMargin, leftPage, minX, pages) => {\n  if (displayedPages === 1) { return xMargin }\n  else {\n      const x = pageUrl(leftPage, pages) ? xMargin : viewWidth / 2\n      return x < minX ? x : minX \n  }\n}\n\nconst pageWidth = (imageWidth, pageScale) => {\n  return Math.round(imageWidth * pageScale)\n}\n\nconst pageHeight = (imageHeight, pageScale) => Math.round(imageHeight * pageScale)\n\nconst xMargin = (viewWidth, pageWidth, displayedPages) => {\n  console.log('xMargin', viewWidth, pageWidth, displayedPages);\n  return (viewWidth - pageWidth * displayedPages) / 2\n}\n\nconst yMargin = (viewHeight, pageHeight) => (viewHeight - pageHeight) / 2\n\nconst centerOffsetSmoothed = (currentCenterOffset) => Math.round(currentCenterOffset)\n\nexport const _pageUrl = memoize(pageUrl)\nexport const _boundingRight = memoize(boundingRight)\nexport const _boundingLeft = memoize(boundingLeft)\nexport const _pageWidth = memoize(pageWidth)\nexport const _pageHeight = memoize(pageHeight)\nexport const _xMargin = memoize(xMargin)\nexport const _yMargin = memoize(yMargin)\nexport const _centerOffsetSmoothed = memoize(centerOffsetSmoothed)\n","import { Container } from \"unstated\"\n\nconst initPages = [\n  null,\n  {\n    url: \"images/1.jpg\",\n    id: '8182045543'\n  },\n  {\n    url: \"images/2.jpg\",\n    id: \"4591469984\"\n  },\n  {\n    url: \"images/3.jpg\",\n    id: \"3816263638\"\n  },\n  {\n    url: \"images/4.jpg\",\n    id: \"7912047691\"\n  },\n  {\n    url: \"images/5.jpg\",\n    id: \"4944943318\"\n  },\n  {\n    url: \"images/6.jpg\",\n    id: \"3800999370\"\n  }\n];\n\nclass FlipBookStore extends Container {\n  state = {\n    pageWidth: 640,\n    pageHeight: 906,\n    pages: initPages,\n    leftPage: 0,\n    rightPage: 1\n  };\n}\n\nconst FlipBookContainer = new FlipBookStore();\n\nexport default FlipBookContainer;\nwindow.thaycacac = FlipBookContainer;\n","import {\n  identity,\n  multiply,\n  translate,\n  translateZ,\n  rotateY\n} from 'rematrix';\n\nexport default class Matrix {\n  constructor(arg) {\n    if (arg) {\n      if (Array.isArray(arg)) {\n        this.m = arg;\n      } else {\n        this.m = [...arg.m];\n      }\n    } else {\n      this.m = identity();\n    }\n  }\n\n  multiply(m) {\n    if (!Array.isArray(m)) {\n      m = m.m;\n    }\n    return this.m = multiply(this.m, m);\n  }\n\n  computeX() {\n    return this.m[12];\n  }\n\n  translate(x, y) {\n    return this.multiply(translate(x, y));\n  }\n\n  translateZ(z) {\n    return this.multiply(translateZ(z));\n  }\n\n  rotateY(deg) {\n    return this.multiply(rotateY(deg));\n  }\n\n  toString() {\n    return `matrix3d(${this.m.toString()})`;\n  }\n\n};","import memoize from 'lodash/memoize'\nimport Matrix from './matrix'\n\nconst IE = /Trident/.test(navigator.userAgent)\nconst gloss = 0.6\nconst nPolygons = 10\nconst perspective = '2400px'\n\nconst pageUrl = (pages, page) => {\n  if (!pages[page]) return null\n  // if (!pages[page].url) return default\n  return pages[page].url || null;\n}\n\nconst canFlipLeft = (flip, currentPage, displayedPages, leftPage, pages) => {\n  return (\n    !flip.direction &&\n    (currentPage >= displayedPages) &&\n    !(displayedPages === 1 && !pageUrl(pages, leftPage - 1))\n  )\n}\n\n\nconst canFlipRight = (flip, currentPage, nPages, displayedPages) => {\n  return !flip.direction && currentPage < nPages - displayedPages\n}\n\nconst polygonWidth = pageWidth => {\n  var w;\n  w = pageWidth / nPolygons;\n  w = Math.ceil(w + 1);\n  return w + 'px';\n}\n\nconst polygonHeight = pageHeight => {\n  return pageHeight + 'px';\n}\n\nconst polygonBgSize = (pageWidth, pageHeight) => {\n  return `${pageWidth}px ${pageHeight}px`;\n}\n\nconst makePolygonArray = (face, flip, displayedPages, pageWidth, xMargin, spaceTop, minX, maxX, setMinX, setMaxX) => {\n  var ax,\n      bgImg,\n      bgPos,\n      dRadian,\n      dRotate,\n      direction,\n      gx,\n      i,\n      image,\n      j,\n      lighting,\n      originRight,\n      pageRotation,\n      pageTransform,\n      polygonWidth,\n      progress,\n      rad,\n      radian,\n      radius,\n      ref,\n      results,\n      rotate,\n      tfString,\n      theta,\n      transform,\n      x,\n      z;\n  if (!flip.direction) {\n    return [];\n  }\n  progress = flip.progress;\n  direction = flip.direction;\n  if (displayedPages === 1 && direction === 'left') {\n    progress = 1 - progress;\n    direction = 'right';\n  }\n  image = face === 'front' ? flip.frontImage : flip.backImage;\n  bgImg = image && `url('${image}')`;\n  polygonWidth = pageWidth / nPolygons;\n  gx = xMargin;\n  originRight = false;\n  if (displayedPages === 1) {\n    if (face === 'back') {\n      originRight = true;\n      gx = xMargin - pageWidth;\n    }\n  } else {\n    if (direction === 'left') {\n      if (face === 'back') {\n        gx = pageWidth;\n      } else {\n        originRight = true;\n      }\n    } else {\n      if (face === 'front') {\n        gx = pageWidth;\n      } else {\n        originRight = true;\n      }\n    }\n  }\n  pageTransform = new Matrix();\n  pageTransform.translate(gx, spaceTop);\n  pageRotation = 0;\n  if (progress > 0.5) {\n    pageRotation = -(progress - 0.5) * 2 * 180;\n  }\n  if (direction === 'left') {\n    pageRotation = -pageRotation;\n  }\n  if (face === 'back') {\n    pageRotation += 180;\n  }\n  if (pageRotation) {\n    if (originRight) {\n      pageTransform.translate(pageWidth);\n    }\n    pageTransform.rotateY(pageRotation);\n    if (originRight) {\n      pageTransform.translate(-pageWidth);\n    }\n  }\n  if (progress < 0.5) {\n    theta = progress * 2 * Math.PI;\n  } else {\n    theta = (1 - (progress - 0.5) * 2) * Math.PI;\n  }\n  if (theta === 0) {\n    theta = 1e-9;\n  }\n  radius = pageWidth / theta;\n  radian = 0;\n  dRadian = theta / nPolygons;\n  rotate = dRadian / 2 / Math.PI * 180;\n  dRotate = dRadian / Math.PI * 180;\n  if (originRight) {\n    rotate = -theta / Math.PI * 180 + dRotate / 2;\n  }\n  if (face === 'back') {\n    rotate = -rotate;\n    dRotate = -dRotate;\n  }\n  setMinX(Infinity)\n  setMaxX(-Infinity)\n  results = [];\n  for (i = j = 0, ref = nPolygons; (0 <= ref ? j < ref : j > ref); i = 0 <= ref ? ++j : --j) {\n    bgPos = `${i / (nPolygons - 1) * 100}% 0px`;\n    transform = new Matrix(pageTransform);\n    rad = originRight ? theta - radian : radian;\n    x = Math.sin(rad) * radius;\n    if (originRight) {\n      x = pageWidth - x;\n    }\n    z = (1 - Math.cos(rad)) * radius;\n    if (face === 'back') {\n      z = -z;\n    }\n    transform.translate(x);\n    transform.translateZ(z);\n    transform.rotateY(-rotate);\n    ax = transform.computeX();\n    if (ax > maxX) {\n      setMaxX(ax)\n    }\n    ax += 2 * polygonWidth;\n    if (ax < minX) {\n      setMinX(ax)\n    }\n    lighting = computeLighting(pageRotation - rotate, dRotate);\n    tfString = `perspective(${perspective}) ${transform.toString()}`;\n    radian += dRadian;\n    rotate += dRotate;\n    results.push([face + i, bgImg, lighting, bgPos, tfString, Math.abs(Math.round(z))]);\n  }\n  return results;\n};\n\nconst computeLighting = (rot, dRotate, ambient) => {\n  var DEG, POW, blackness, diffuse, gradients, lightingPoints, specular;\n  gradients = [];\n  lightingPoints = [-0.5, -0.25, 0, 0.25, 0.5];\n  if (ambient < 1) {\n    blackness = 1 - ambient;\n    diffuse = lightingPoints.map((d) => {\n      return (1 - Math.cos((rot - dRotate * d) / 180 * Math.PI)) * blackness;\n    });\n    gradients.push(`linear-gradient(to right,\n      rgba(0, 0, 0, ${diffuse[0]}),\n      rgba(0, 0, 0, ${diffuse[1]}) 25%,\n      rgba(0, 0, 0, ${diffuse[2]}) 50%,\n      rgba(0, 0, 0, ${diffuse[3]}) 75%,\n      rgba(0, 0, 0, ${diffuse[4]}))`);\n  }\n  if (gloss > 0 && !IE) {\n    DEG = 30;\n    POW = 200;\n    specular = lightingPoints.map((d) => {\n      return Math.max(Math.cos((rot + DEG - dRotate * d) / 180 * Math.PI) ** POW, Math.cos((rot - DEG - dRotate * d) / 180 * Math.PI) ** POW);\n    });\n    gradients.push(`linear-gradient(to right,\n      rgba(255, 255, 255, ${specular[0] * gloss}),\n      rgba(255, 255, 255, ${specular[1] * gloss}) 25%,\n      rgba(255, 255, 255, ${specular[2] * gloss}) 50%,\n      rgba(255, 255, 255, ${specular[3] * gloss}) 75%,\n      rgba(255, 255, 255, ${specular[4] * gloss}))`);\n  }\n  return gradients.join(',');\n};\n\nconst polygonArray = (flip, displayedPages, pageWidth, xMargin, spaceTop, minX, maxX, setMinX, setMaxX) => {\n  return makePolygonArray('front', flip, displayedPages, pageWidth, xMargin, spaceTop, minX, maxX, setMinX, setMaxX)\n    .concat(makePolygonArray('back', flip, displayedPages, pageWidth, xMargin, spaceTop, minX, maxX, setMinX, setMaxX))\n}\n\nexport const _canFlipLeft = memoize(canFlipLeft)\nexport const _canFlipRight = memoize(canFlipRight)\nexport const _polygonWidth = memoize(polygonWidth)\nexport const _polygonHeight = memoize(polygonHeight)\nexport const _polygonBgSize = memoize(polygonBgSize)\nexport const _polygonArray = memoize(polygonArray)\n","import React, { useState, useEffect } from \"react\"\nimport { easeInOut } from \"../helper\"\nimport { Subscribe } from \"unstated\"\nimport FlipBookContainer from \"../Stores/Flipbook\";\nimport {\n  _canFlipLeft,\n  _canFlipRight,\n  _polygonArray,\n  _polygonBgSize,\n  _polygonHeight,\n  _polygonWidth\n} from '../computed'\nimport \"./Styles.css\"\n\nconst Flipbook = ({\n  flipDuration = 1000,\n  spaceTop = 0\n}) => {\n  const flipInit = {\n    progress: 0,\n    direction: null,\n    frontImage: null,\n    backImage: null,\n    auto: false\n  }\n\n  const {\n    pageWidth,\n    pageHeight,\n    pages,\n    leftPage,\n    rightPage\n  } = FlipBookContainer.state\n\n  const [nPages, setNPages] = useState(pages.length);\n  const [displayedPages, setDisplayedPages] = useState(1);\n  const [nImageLoad, setNImageLoad] = useState(0);\n  const [nImageLoadTrigger, setNImageLoadTrigger] = useState(0);\n  const [imageLoadCallback, setImageLoadCallback] = useState(null);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [touchStartX, setTouchStartX] = useState(null);\n  const [touchStartY, setTouchStartY] = useState(null);\n  const [hasPointerEvents, setHasPointerEvents] = useState(false);\n  const [minX, setMinX] = useState(Infinity);\n  const [maxX, setMaxX] = useState(-Infinity);\n  const [preloadedImages, setPreloadedImages] = useState({});\n  const [flip, setFlip] = useState(flipInit);\n  const [xMargin, setXMargin] = useState(0) // this.pageWidth * 2 - this.pageWidth * this.displayedPages) / 2\n  // computed\n  const canFlipLeft = _canFlipLeft(flip, currentPage, displayedPages, leftPage, pages)\n  const canFlipRight = _canFlipRight(flip, currentPage, nPages, displayedPages)\n  const polygonArray = _polygonArray(flip, displayedPages, pageWidth, xMargin, spaceTop, minX, maxX, setMinX, setMaxX)\n  const polygonBgSize = _polygonBgSize(pageWidth, pageHeight)\n  const polygonWidth = _polygonWidth(pageWidth)\n  const polygonHeight = _polygonHeight(pageHeight)\n\n  useEffect(() => {\n    onResize();\n    preloadImages();\n  }, []);\n\n  useEffect(() => {\n    FlipBookContainer.setState({\n      leftPage: currentPage,\n      rightPage: currentPage + 1\n    })\n    preloadImages()\n  }, [currentPage])\n\n  // method\n  const onResize = () => {\n    setDisplayedPages(pageWidth * 2 > pageHeight ? 2 : 1)\n  }\n\n  const logEvery = () => {\n    console.log({\n      currentPage: currentPage,\n      displayedPages: displayedPages,\n      flip: flip,\n      hasPointerEvents: hasPointerEvents,\n      imageLoadCallback: imageLoadCallback,\n      leftPage: leftPage,\n      maxX: maxX,\n      minX: minX,\n      nImageLoad: nImageLoad,\n      nImageLoadTrigger: nImageLoadTrigger,\n      nPages: nPages,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      preloadedImages: preloadImages,\n      rightPage: rightPage,\n      touchStartX: touchStartX,\n      touchStartY: touchStartY,\n      canFlipLeft: canFlipLeft,\n      canFlipRight: canFlipRight,\n      polygonArray: polygonArray,\n      polygonBgSize: polygonBgSize,\n      polygonWidth: polygonWidth,\n      polygonHeight: polygonHeight\n    });\n  }\n\n  const pageUrl = (page) => {\n    if (!pages[page]) return null\n    // if (!pages[page].url) return default\n    return pages[page].url || null;\n  }\n\n  const flipStart = async (direction, auto) => {\n    if (direction === 'left') {\n      if (displayedPages === 1) {\n        setFlip({\n          ...flip,\n          direction: direction,\n          frontImage: pageUrl(currentPage - 1),\n          backImage: null\n        })\n      } else {\n        setFlip({\n          ...flip,\n          direction: direction,\n          frontImage: pageUrl(leftPage),\n          backImage: pageUrl(currentPage - displayedPages + 1)\n        })\n      }\n    } else {\n      if (displayedPages === 1) {\n        setFlip({\n          ...flip,\n          direction: direction,\n          frontImage: pageUrl(currentPage),\n          backImage: null\n        })\n      } else {\n        setFlip({\n          ...flip,\n          direction: direction,\n          frontImage: pageUrl(rightPage),\n          backImage: pageUrl(currentPage + displayedPages)\n        })\n      }\n    }\n    return requestAnimationFrame(() => {\n      return requestAnimationFrame(() => {\n        if (direction === 'left') {\n          if (displayedPages === 2) {\n            FlipBookContainer.setState({\n              leftPage: currentPage - displayedPages\n            })\n          }\n        } else {\n          if (displayedPages === 1) {\n            FlipBookContainer.setState({\n              leftPage: currentPage + displayedPages\n            })\n          } else {  \n            FlipBookContainer.setState({\n              rightPage: currentPage + 1 + displayedPages\n            })\n          }\n        }\n        if (auto) {\n          return flipAuto(true);\n        }\n      });\n    });\n  }\n\n  const flipAuto = ease => {\n    var animate, duration, startRatio, t0;\n      t0 = Date.now();\n      duration = flipDuration * (1 - flip.progress);\n      startRatio = flip.progress;\n      setFlip({\n        ...flip,\n        auto: true\n      })\n      animate = () => {\n        return requestAnimationFrame(() => {\n          var ratio, t;\n          t = Date.now() - t0;\n          ratio = startRatio + t / duration;\n          if (ratio > 1) {\n            ratio = 1;\n          }\n          setFlip({\n            ...flip,\n            progress: ease ? easeInOut(ratio) : ratio\n          })\n          if (ratio < 1) {\n            return animate();\n          } else {\n            if (flip.direction === 'left') {\n              setCurrentPage(currentPage - displayedPages)\n            } else {\n              setCurrentPage(currentPage + displayedPages)\n            }\n            if (displayedPages === 1 && flip.direction === 'right') {\n              setFlip({\n                ...flip,\n                direction: null\n              })\n            } else {\n              onImageLoad(1, () => {\n                console.log('callback here');\n                setFlip({\n                  ...flip,\n                  direction: null,\n                  auto: false,\n                  progress: 0\n                })\n              });\n            }\n          }\n        });\n      };\n      return animate();\n  }\n\n  const flipRevert = () => {\n    var animate, duration, startRatio, t0;\n      t0 = Date.now();\n      duration = flipDuration * flip.progress;\n      startRatio = flip.progress;\n      setFlip({\n        ...flip,\n        auto: true\n      })\n      animate = () => {\n        return requestAnimationFrame(() => {\n          var ratio, t;\n          t = Date.now() - t0;\n          ratio = startRatio - startRatio * t / duration;\n          if (ratio < 0) {\n            ratio = 0;\n          }\n          setFlip({\n            ...flip,\n            progress: ratio\n          })\n          if (ratio > 0) {\n            return animate();\n          } else {\n            FlipBookContainer.setState({\n              leftPage: currentPage,\n              rightPage: currentPage + 1\n            })\n            if (displayedPages === 1 && flip.direction === 'left') {\n              setFlip({\n                ...flip,\n                direction: null,\n                auto: false\n              })\n            } else {\n              onImageLoad(1, () => {\n                setFlip({\n                  ...flip,\n                  direction: null,\n                  auto: false\n                })\n              });\n            }\n            return false;\n          }\n        });\n      };\n      return animate();\n  }\n\n  const onImageLoad = (trigger, cb) => {\n    setNImageLoad(0)\n    setNImageLoadTrigger(trigger)\n    setImageLoadCallback(cb)\n  }\n\n  const didLoadImage = ev => {\n    if (!imageLoadCallback) {\n      return;\n    }\n    imageLoadCallback()\n  }\n\n  const swipeStart = touch => {\n    setTouchStartX(touch.pageX);\n    setTouchStartY(touch.pageY);\n  }\n\n  const swipeMove = touch => {\n    var x, y;\n    if (touchStartX == null) {\n      return;\n    }\n    x = touch.pageX - touchStartX;\n    y = touch.pageY - touchStartY;\n    if (Math.abs(y) > Math.abs(x)) {\n      return;\n    }\n    if (x > 0) {\n      if (flip.direction === null && canFlipLeft && x >= 5) {\n        flipStart('left', false);\n      }\n      if (flip.direction === 'left') {\n        setFlip({\n          ...flip,\n          progress: x / pageWidth < 1 ? x / pageWidth : 1\n        })\n      }\n    } else {\n      if (flip.direction === null && canFlipRight && x <= -5) {\n        flipStart('right', false);\n      }\n      if (flip.direction === 'right') {\n        setFlip({\n          ...flip,\n          progress: -x / pageWidth < 1 ? -x / pageWidth : 1\n        })\n      }\n    }\n    return true;\n  }\n\n  const swipeEnd = touch => {\n    if (flip.direction !== null && !flip.auto) {\n      if (flip.progress > 1 / 4) {\n        flipAuto(false);\n      } else {\n        flipRevert();\n      }\n    }\n    setTouchStartX(null)\n    return null;\n  }\n\n  const onMouseDown = ev => {\n    if (hasPointerEvents) {\n      return;\n    }\n    if (ev.which && ev.which !== 1) {\n      return;\n    }\n    return swipeStart(ev);\n  }\n\n  const onMouseMove = ev => {\n    if (hasPointerEvents) {\n      return;\n    }\n    if (ev.which && ev.which !== 1) {\n      return;\n    } // Ignore right-click\n    return swipeMove(ev);\n  }\n\n  const onMouseUp = ev => {\n    if (!hasPointerEvents) {\n      return swipeEnd(ev)\n    }\n  }\n\n  const preloadImages = () => {\n    var i, img, j, ref, ref1, results, url;\n    if (Object.keys(preloadedImages).length >= 10) {\n      this.preloadedImages = {};\n    }\n    results = [];\n    for (i = j = ref = currentPage - 3, ref1 = currentPage + 3; (ref <= ref1 ? j <= ref1 : j >= ref1); i = ref <= ref1 ? ++j : --j) {\n      url = pageUrl(i);\n      if (url) {\n        if (!preloadedImages[url]) {\n          img = new Image();\n          img.src = url;\n          results.push(preloadedImages[url] = img);\n        } else {\n          results.push(void 0);\n        }\n      } else {\n        results.push(void 0);\n      }\n    }\n    return results;\n  };\n\n  return (\n    <Subscribe to={[FlipBookContainer]}>\n      {flipBookContainer => {\n        const {\n          pageWidth,\n          pageHeight,\n          leftPage,\n          rightPage\n        } = flipBookContainer.state\n        return (\n          <div\n            onMouseDown={ev => onMouseDown(ev)}\n            onMouseMove={ev => onMouseMove(ev)}\n            onMouseUp={ev => onMouseUp(ev)}\n            style={{\n              width: pageWidth * displayedPages + 'px',\n              height: pageHeight + 'px',\n              margin: 'auto'  \n            }}\n          >\n            <div className=\"viewport\">\n            <div className=\"container\" style={{ width: '100%' }}>\n              <div\n                className=\"centering-box\"\n                style={{ width: pageWidth * displayedPages }}\n              >\n                { pageUrl(leftPage) && <img\n                  className=\"page fixed\"\n                  style={{\n                    width: pageWidth + 'px',\n                    height: pageHeight + 'px',\n                    left: xMargin + 'px',\n                    top: spaceTop + 'px'\n                  }}\n                  src={pageUrl(leftPage)}\n                  onLoad={($event) => didLoadImage($event)}\n                />}\n                { displayedPages === 2 && pageUrl(rightPage) && <img\n                  className=\"page fixed\"\n                  style={{\n                    width: pageWidth + 'px',\n                    height: pageHeight + 'px',\n                    left: pageWidth + 'px',\n                    top: spaceTop + 'px'\n                  }}\n                  src={pageUrl(rightPage)}\n                  onLoad={($event) => didLoadImage($event)}\n                />}\n                {\n                  polygonArray.map((item, index) => {\n                    return (\n                      <div\n                      key={ index }\n                      className={ item[1] ? 'polygon blank' : 'polygon'}\n                      style={{\n                        backgroundImage: item[1],\n                        backgroundSize: polygonBgSize,\n                        backgroundPosition: item[3],\n                        width: polygonWidth,\n                        height: polygonHeight,\n                        transform: item[4],\n                        zIndex: item[5]\n                      }}\n                      >\n                      {\n                        item[2].length && <div\n                          className=\"lighting\"\n                          style={{ backgroundImage: item[2] }}\n                        />\n                      }\n                      </div>\n                    )\n                  })\n                }\n                </div>\n                <div className=\"guard\" />\n              </div>\n            </div>\n          </div>\n        );\n      }}\n    </Subscribe>\n  );\n};\n\nexport default Flipbook;\n","import React, { useState } from \"react\";\nimport Flipbook from \"./components/Flipbook\";\nimport { Provider } from \"unstated\";\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <Provider>\n      <div id=\"app\">\n        <Flipbook/>\n      </div>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"]}}